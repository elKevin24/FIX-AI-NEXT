
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/home/kev/Documentos/GitHub/FIX-AI-NEXT[39m

 [31m‚ùØ[39m src/lib/cash-register-actions.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 17[2mms[22m[39m
       [32m‚úì[39m should open a register successfully[32m 2[2mms[22m[39m
       [32m‚úì[39m should fail if already open[32m 2[2mms[22m[39m
[31m       [31m√ó[31m should close register successfully[39m[32m 10[2mms[22m[39m
       [32m‚úì[39m should register transaction[32m 0[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 1 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/lib/cash-register-actions.test.ts[2m > [22mCash Register Actions[2m > [22mcloseCashRegister[2m > [22mshould close register successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ ObjectContaining{‚Ä¶}, ‚Ä¶(1) ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   ObjectContaining {[90m
[31m+   {[90m
[31m+     "data": {[90m
[31m+       "closedAt": 2026-01-20T04:45:00.101Z,[90m
[31m+       "closedById": "user-1",[90m
[31m+       "closingBalance": "100",[90m
[31m+       "closingNotes": "All good",[90m
[31m+       "difference": "0",[90m
[31m+       "expectedBalance": "100",[90m
[31m+       "isOpen": false,[90m
[31m+     },[90m
[31m+     "include": {[90m
[31m+       "closedBy": {[90m
[31m+         "select": {[90m
[31m+           "email": true,[90m
[31m+           "name": true,[90m
[31m+         },[90m
[31m+       },[90m
[31m+       "openedBy": {[90m
[31m+         "select": {[90m
[31m+           "email": true,[90m
[31m+           "name": true,[90m
[31m+         },[90m
[31m+       },[90m
[31m+       "transactions": {[90m
[31m+         "orderBy": {[90m
[31m+           "createdAt": "asc",[90m
[31m+         },[90m
[31m+       },[90m
[31m+     },[90m
[2m      "where": {[22m
[2m        "id": "123e4567-e89b-12d3-a456-426614174000",[22m
[32m-     },[90m
[32m-   },[90m
[32m-   ObjectContaining {[90m
[32m-     "data": ObjectContaining {[90m
[32m-       "isOpen": false,[90m
[2m      },[22m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m‚ùØ[22m src/lib/cash-register-actions.test.ts:[2m71:48[22m[39m
    [90m 69| [39m            })[33m;[39m
    [90m 70| [39m
    [90m 71| [39m            [34mexpect[39m(mockDb[33m.[39mcashRegister[33m.[39mupdate)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                               [31m^[39m
    [90m 72| [39m                expect[33m.[39m[34mobjectContaining[39m({ where[33m:[39m { id[33m:[39m validId } })[33m,[39m
    [90m 73| [39m                expect.objectContaining({ data: expect.objectContainin‚Ä¶

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/1]‚éØ[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (4)[39m
[2m   Start at [22m 22:44:59
[2m   Duration [22m 1.03s[2m (transform 103ms, setup 0ms, import 325ms, tests 17ms, environment 479ms)[22m

